---

- name: Add docker group
  become: yes
  become_method: sudo
  become_user: root
  group: 
    name: docker
    state: present

- name: Add docker user 
  become: yes
  become_method: sudo
  become_user: root
  user: 
    name=docker 
    groups=docker 
    append=yes 
    state=present 
    createhome=yes

- name: Allow docker sudoer privileges
  become: yes
  become_method: sudo
  become_user: root
  lineinfile:
    dest: /etc/sudoers
    state: present
    regexp: '^%docker'
    line: '%docker ALL=(ALL) NOPASSWD: ALL'
    validate: 'visudo -cf %s'

- name : install docker
  become: yes
  become_method: sudo
  become_user: root
  yum:
    name: docker
    state: latest
